"use strict";(self.webpackChunkmy_3d_portfolio=self.webpackChunkmy_3d_portfolio||[]).push([[21],{8402:(e,t,i)=>{i.r(t),i.d(t,{default:()=>v});var s=i(6540),n=i(3304),o=i(4281),r=i(4347),h=i(9040),a=i(9412),c=i(132),l=i(1101);class d{constructor(e){let{gl:t,plane:i,renderer:s,text:n,textColor:o="#545050",font:r="30px sans-serif"}=e;!function(e){const t=Object.getPrototypeOf(e);Object.getOwnPropertyNames(t).forEach((t=>{"constructor"!==t&&"function"==typeof e[t]&&(e[t]=e[t].bind(e))}))}(this),this.gl=t,this.plane=i,this.renderer=s,this.text=n,this.textColor=o,this.font=r,this.createMesh()}createMesh(){const{texture:e,width:t,height:i}=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bold 30px monospace",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"black";const o=document.createElement("canvas"),r=o.getContext("2d");r.font=i;const h=r.measureText(t),a=Math.ceil(h.width),c=Math.ceil(1.2*parseInt(i,10));o.width=a+20,o.height=c+20,r.font=i,r.fillStyle=s,r.textBaseline="middle",r.textAlign="center",r.clearRect(0,0,o.width,o.height),r.fillText(t,o.width/2,o.height/2);const l=new n.g(e,{generateMipmaps:!1});return l.image=o,{texture:l,width:o.width,height:o.height}}(this.gl,this.text,this.font,this.textColor),s=new o.Z(this.gl),a=new r.B(this.gl,{vertex:"\n        attribute vec3 position;\n        attribute vec2 uv;\n        uniform mat4 modelViewMatrix;\n        uniform mat4 projectionMatrix;\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragment:"\n        precision highp float;\n        uniform sampler2D tMap;\n        varying vec2 vUv;\n        void main() {\n          vec4 color = texture2D(tMap, vUv);\n          if (color.a < 0.1) discard;\n          gl_FragColor = color;\n        }\n      ",uniforms:{tMap:{value:e}},transparent:!0});this.mesh=new h.e(this.gl,{geometry:s,program:a});const c=t/i,l=.15*this.plane.scale.y,d=l*c;this.mesh.scale.set(d,l,1),this.mesh.position.y=.5*-this.plane.scale.y-.5*l-.05,this.mesh.setParent(this.plane)}}class u{constructor(e){let{geometry:t,gl:i,image:s,index:n,length:o,renderer:r,scene:h,screen:a,text:c,viewport:l,bend:d,textColor:u,borderRadius:m=0,font:p}=e;this.extra=0,this.geometry=t,this.gl=i,this.image=s,this.index=n,this.length=o,this.renderer=r,this.scene=h,this.screen=a,this.text=c,this.viewport=l,this.bend=d,this.textColor=u,this.borderRadius=m,this.font=p,this.createShader(),this.createMesh(),this.createTitle(),this.onResize()}createShader(){const e=new n.g(this.gl,{generateMipmaps:!1});this.program=new r.B(this.gl,{depthTest:!1,depthWrite:!1,vertex:"\n        precision highp float;\n        attribute vec3 position;\n        attribute vec2 uv;\n        uniform mat4 modelViewMatrix;\n        uniform mat4 projectionMatrix;\n        uniform float uTime;\n        uniform float uSpeed;\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          vec3 p = position;\n          p.z = (sin(p.x * 4.0 + uTime) * 1.5 + cos(p.y * 2.0 + uTime) * 1.5) * (0.1 + uSpeed * 0.5);\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(p, 1.0);\n        }\n      ",fragment:"\n        precision highp float;\n        uniform vec2 uImageSizes;\n        uniform vec2 uPlaneSizes;\n        uniform sampler2D tMap;\n        uniform float uBorderRadius;\n        varying vec2 vUv;\n        \n        // Rounded box SDF for UV space\n        float roundedBoxSDF(vec2 p, vec2 b, float r) {\n          vec2 d = abs(p) - b;\n          return length(max(d, vec2(0.0))) + min(max(d.x, d.y), 0.0) - r;\n        }\n        \n        void main() {\n          vec2 ratio = vec2(\n            min((uPlaneSizes.x / uPlaneSizes.y) / (uImageSizes.x / uImageSizes.y), 1.0),\n            min((uPlaneSizes.y / uPlaneSizes.x) / (uImageSizes.y / uImageSizes.x), 1.0)\n          );\n          vec2 uv = vec2(\n            vUv.x * ratio.x + (1.0 - ratio.x) * 0.5,\n            vUv.y * ratio.y + (1.0 - ratio.y) * 0.5\n          );\n          vec4 color = texture2D(tMap, uv);\n          \n          // Apply rounded corners (assumes vUv in [0,1])\n          float d = roundedBoxSDF(vUv - 0.5, vec2(0.5 - uBorderRadius), uBorderRadius);\n          if(d > 0.0) {\n            discard;\n          }\n          \n          gl_FragColor = vec4(color.rgb, 1.0);\n        }\n      ",uniforms:{tMap:{value:e},uPlaneSizes:{value:[0,0]},uImageSizes:{value:[0,0]},uSpeed:{value:0},uTime:{value:100*Math.random()},uBorderRadius:{value:this.borderRadius}},transparent:!0});const t=new Image;t.crossOrigin="anonymous",t.src=this.image,t.onload=()=>{e.image=t,this.program.uniforms.uImageSizes.value=[t.naturalWidth,t.naturalHeight]}}createMesh(){this.plane=new h.e(this.gl,{geometry:this.geometry,program:this.program}),this.plane.setParent(this.scene)}createTitle(){this.title=new d({gl:this.gl,plane:this.plane,renderer:this.renderer,text:this.text,textColor:this.textColor,fontFamily:this.font})}update(e,t){this.plane.position.x=this.x-e.current-this.extra;const i=this.plane.position.x,s=this.viewport.width/2;if(0===this.bend)this.plane.position.y=0,this.plane.rotation.z=0;else{const e=Math.abs(this.bend),t=(s*s+e*e)/(2*e),n=Math.min(Math.abs(i),s),o=t-Math.sqrt(t*t-n*n);this.bend>0?(this.plane.position.y=-o,this.plane.rotation.z=-Math.sign(i)*Math.asin(n/t)):(this.plane.position.y=o,this.plane.rotation.z=Math.sign(i)*Math.asin(n/t))}this.speed=e.current-e.last,this.program.uniforms.uTime.value+=.04,this.program.uniforms.uSpeed.value=this.speed;const n=this.plane.scale.x/2,o=this.viewport.width/2;this.isBefore=this.plane.position.x+n<-o,this.isAfter=this.plane.position.x-n>o,"right"===t&&this.isBefore&&(this.extra-=this.widthTotal,this.isBefore=this.isAfter=!1),"left"===t&&this.isAfter&&(this.extra+=this.widthTotal,this.isBefore=this.isAfter=!1)}onResize(){let{screen:e,viewport:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&(this.screen=e),t&&(this.viewport=t,this.plane.program.uniforms.uViewportSizes&&(this.plane.program.uniforms.uViewportSizes.value=[this.viewport.width,this.viewport.height])),this.scale=this.screen.height/2e3,this.plane.scale.y=this.viewport.height*(700*this.scale)/this.screen.height,this.plane.scale.x=this.viewport.width*(900*this.scale)/this.screen.width,this.plane.program.uniforms.uPlaneSizes.value=[this.plane.scale.x,this.plane.scale.y],this.padding=2,this.width=this.plane.scale.x+this.padding,this.widthTotal=this.width*this.length,this.x=this.width*this.index}}class m{constructor(e){let{items:t,bend:i,textColor:s="#ffffff",borderRadius:n=0,font:o="bold 30px DM Sans"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};document.documentElement.classList.remove("no-js"),this.container=e,this.scroll={ease:.05,current:0,target:0,last:0},this.onCheckDebounce=function(e,t){let i;return function(){for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];clearTimeout(i),i=setTimeout((()=>e.apply(this,n)),t)}}(this.onCheck,200),this.createRenderer(),this.createCamera(),this.createScene(),this.onResize(),this.createGeometry(),this.createMedias(t,i,s,n,o),this.update(),this.addEventListeners()}createRenderer(){this.renderer=new a.A({alpha:!0}),this.gl=this.renderer.gl,this.gl.clearColor(0,0,0,0),this.container.appendChild(this.gl.canvas)}createCamera(){this.camera=new c.i(this.gl),this.camera.fov=45,this.camera.position.z=20}createScene(){this.scene=new l.d}createGeometry(){this.planeGeometry=new o.Z(this.gl,{heightSegments:50,widthSegments:100})}createMedias(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;const o=e&&e.length?e:[{image:"https://picsum.photos/seed/1/800/600?grayscale",text:"Bridge"},{image:"https://picsum.photos/seed/2/800/600?grayscale",text:"Desk Setup"},{image:"https://picsum.photos/seed/3/800/600?grayscale",text:"Waterfall"},{image:"https://picsum.photos/seed/4/800/600?grayscale",text:"Strawberries"},{image:"https://picsum.photos/seed/5/800/600?grayscale",text:"Deep Diving"},{image:"https://picsum.photos/seed/16/800/600?grayscale",text:"Train Track"},{image:"https://picsum.photos/seed/17/800/600?grayscale",text:"Santorini"},{image:"https://picsum.photos/seed/8/800/600?grayscale",text:"Blurry Lights"},{image:"https://picsum.photos/seed/9/800/600?grayscale",text:"New York"},{image:"https://picsum.photos/seed/10/800/600?grayscale",text:"Good Boy"},{image:"https://picsum.photos/seed/21/800/600?grayscale",text:"Coastline"},{image:"https://picsum.photos/seed/12/800/600?grayscale",text:"Palm Trees"}];this.mediasImages=o.concat(o),this.medias=this.mediasImages.map(((e,o)=>new u({geometry:this.planeGeometry,gl:this.gl,image:e.image,index:o,length:this.mediasImages.length,renderer:this.renderer,scene:this.scene,screen:this.screen,text:e.text,viewport:this.viewport,bend:t,textColor:i,borderRadius:s,font:n})))}onTouchDown(e){this.isDown=!0,this.scroll.position=this.scroll.current,this.start=e.touches?e.touches[0].clientX:e.clientX}onTouchMove(e){if(!this.isDown)return;const t=e.touches?e.touches[0].clientX:e.clientX,i=.05*(this.start-t);this.scroll.target=this.scroll.position+i}onTouchUp(){this.isDown=!1,this.onCheck()}onWheel(){this.scroll.target+=2,this.onCheckDebounce()}onCheck(){if(!this.medias||!this.medias[0])return;const e=this.medias[0].width,t=e*Math.round(Math.abs(this.scroll.target)/e);this.scroll.target=this.scroll.target<0?-t:t}onResize(){this.screen={width:this.container.clientWidth,height:this.container.clientHeight},this.renderer.setSize(this.screen.width,this.screen.height),this.camera.perspective({aspect:this.screen.width/this.screen.height});const e=this.camera.fov*Math.PI/180,t=2*Math.tan(e/2)*this.camera.position.z,i=t*this.camera.aspect;this.viewport={width:i,height:t},this.medias&&this.medias.forEach((e=>e.onResize({screen:this.screen,viewport:this.viewport})))}update(){var e,t,i;this.scroll.current=(e=this.scroll.current,t=this.scroll.target,i=this.scroll.ease,e+(t-e)*i);const s=this.scroll.current>this.scroll.last?"right":"left";this.medias&&this.medias.forEach((e=>e.update(this.scroll,s))),this.renderer.render({scene:this.scene,camera:this.camera}),this.scroll.last=this.scroll.current,this.raf=window.requestAnimationFrame(this.update.bind(this))}addEventListeners(){this.boundOnResize=this.onResize.bind(this),this.boundOnWheel=this.onWheel.bind(this),this.boundOnTouchDown=this.onTouchDown.bind(this),this.boundOnTouchMove=this.onTouchMove.bind(this),this.boundOnTouchUp=this.onTouchUp.bind(this),window.addEventListener("resize",this.boundOnResize),window.addEventListener("mousedown",this.boundOnTouchDown),window.addEventListener("mousemove",this.boundOnTouchMove),window.addEventListener("mouseup",this.boundOnTouchUp),window.addEventListener("touchstart",this.boundOnTouchDown),window.addEventListener("touchmove",this.boundOnTouchMove),window.addEventListener("touchend",this.boundOnTouchUp)}destroy(){window.cancelAnimationFrame(this.raf),window.removeEventListener("resize",this.boundOnResize),window.removeEventListener("mousewheel",this.boundOnWheel),window.removeEventListener("wheel",this.boundOnWheel),window.removeEventListener("mousedown",this.boundOnTouchDown),window.removeEventListener("mousemove",this.boundOnTouchMove),window.removeEventListener("mouseup",this.boundOnTouchUp),window.removeEventListener("touchstart",this.boundOnTouchDown),window.removeEventListener("touchmove",this.boundOnTouchMove),window.removeEventListener("touchend",this.boundOnTouchUp),this.renderer&&this.renderer.gl&&this.renderer.gl.canvas.parentNode&&this.renderer.gl.canvas.parentNode.removeChild(this.renderer.gl.canvas)}}function p(e){let{items:t,bend:i=3,textColor:n="#ffffff",borderRadius:o=.05,font:r="bold 30px DM Sans"}=e;const h=(0,s.useRef)(null);return(0,s.useEffect)((()=>{const e=new m(h.current,{items:t,bend:i,textColor:n,borderRadius:o,font:r});return()=>{e.destroy()}}),[t,i,n,o,r]),s.createElement("div",{className:"circular-gallery",ref:h})}const g=[{image:"/assets/Imagerender1.png",text:"Item 1"},{image:"/assets/Imagerender2.png",text:"Item 2"},{image:"/assets/Imagerender3.png",text:"Item 3"}],v=()=>s.createElement("div",{style:{height:"1000px",position:"relative"}},s.createElement("h2",{className:"image-renders-heading"},"Image Renders"),s.createElement(p,{items:g,bend:0,textColor:"#ffffff",borderRadius:.05,itemSize:2e3}))}}]);
//# sourceMappingURL=21.f137c490399c18160527.js.map